/* ===== Res novae “Old Book ++” ===== */
*{box-sizing:border-box}
:root{
  --ink:#eae7e1;           /* ダーク背景時の文字色 */
  --bg:#0c0d0f;            /* 夜の机 */
  --paper:#141516;         /* 紙面の黒 */
  --edge:#1b1c1f;
  --rule:rgba(255,255,255,.08);
  --amber:#d3a253;         /* 琥珀ボタン */
  --accent:#f8e6c2;        /* クリームのハイライト */
  --muted:#aab1bb;
  --radius:16px;
  --container:980px;
}
@media (prefers-color-scheme: light){
  :root{ --ink:#1c1c1c; --bg:#f4f1ea; --paper:#fffdf7; --edge:#e5dccb; --rule:rgba(0,0,0,.08); --muted:#555; }
}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Avenir Next","Yu Gothic","Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.8}
.container{width:100%;max-width:var(--container);margin:0 auto;padding:0 22px}

/* Header */
.site-header{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,rgba(0,0,0,.35),transparent);backdrop-filter:saturate(1.1) blur(10px);border-bottom:1px solid var(--rule)}
.nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:8px;font-weight:800;letter-spacing:.2px}
.brand .logo{width:22px;height:22px}
.menu{display:flex;gap:18px;white-space:nowrap;overflow:auto;mask-image:linear-gradient(90deg, transparent 0, #000 20px, #000 calc(100% - 20px), transparent)}
.menu a{text-decoration:none;color:var(--ink);opacity:.86;border-bottom:1px dashed transparent}
.menu a:hover{opacity:1;border-color:var(--amber)}

/* Bookmark ribbon CTA */
.bookmark{position:fixed;right:14px;top:94px;z-index:30;display:grid;place-items:center;color:var(--accent);text-decoration:none}
.bookmark .ribbon{width:18px;height:44px;background:linear-gradient(180deg,var(--amber),color-mix(in oklab,var(--amber) 70%, #000));border-radius:6px 6px 2px 2px;box-shadow:0 6px 16px rgba(0,0,0,.3)}
.bookmark svg{position:absolute;top:6px;fill:#000;opacity:.22}

/* Book container */
#book{transition:transform .7s cubic-bezier(.2,.8,.2,1);transform-origin:50% 14%;perspective:1200px}
#book.turn{transform:rotateY(-11deg) translateZ(0)}

/* Cover */
.cover{position:relative;min-height:72vh;display:grid;align-items:end}
.cover-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:grayscale(.1) contrast(1.05) brightness(.6)}
.cover-overlay{position:absolute;inset:0;background:radial-gradient(1200px 400px at 50% -120px,rgba(255,255,255,.06),transparent),linear-gradient(180deg,rgba(0,0,0,.5),transparent 40%, rgba(0,0,0,.6))}
.cover-inner{position:relative;margin-bottom:32px}
.cover h1{font-size:clamp(32px,7vw,68px);line-height:1.06;margin:0 0 14px;font-weight:900;letter-spacing:.3px;color:#fff}
.cover p{max-width:820px;color:var(--accent)}
.quill{position:absolute;right:-8px;bottom:-28px;color:var(--amber);opacity:.7;filter:drop-shadow(0 6px 18px rgba(0,0,0,.35))}
.quill svg{width:120px;height:120px}

/* Paper section */
.chapter{padding:56px 0}
.paper{
  background:linear-gradient(180deg,var(--paper),var(--paper)) padding-box, linear-gradient(180deg,var(--edge),transparent) border-box;
  border:1px solid transparent;border-radius:var(--radius);
  box-shadow:0 12px 36px rgba(0,0,0,.28), 0 1px 0 var(--edge) inset, 0 -1px 0 rgba(255,255,255,.06) inset;
  padding:40px 34px;
}
.paper.narrow{max-width:780px;margin-inline:auto}

/* Headings */
.chapter-head{font-size:clamp(22px,3.2vw,30px);margin:0 0 18px;font-weight:800;display:flex;align-items:center;gap:12px;color:var(--accent)}
.chapter-head span{font-size:.85em;color:var(--amber);letter-spacing:.4px}
.lead{font-size:clamp(16px,2.2vw,20px);color:var(--muted)}

/* Buttons */
.btn{display:inline-block;padding:12px 18px;border-radius:12px;border:1px solid var(--rule);text-decoration:none;color:#111;background:linear-gradient(180deg,#fff,#f7f2e6);transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:var(--amber);color:#111;border-color:color-mix(in oklab, var(--amber) 60%, #0000);box-shadow:0 10px 28px color-mix(in oklab, var(--amber) 30%, transparent)}
.btn.ghost{background:transparent;color:var(--accent)}
.cta-row{display:flex;gap:12px;margin-top:16px}

/* Split */
.split{display:grid;grid-template-columns:1fr 1fr;gap:22px}
@media (max-width:840px){.split{grid-template-columns:1fr}}

/* Motif */
.motif{display:flex;align-items:center;gap:10px;margin-top:12px}
.motif .ring{width:22px;height:22px;border-radius:999px;border:3px solid var(--amber);box-shadow:0 0 0 3px color-mix(in oklab, var(--amber) 25%, transparent) inset}

/* Tree */
.tree{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:14px;white-space:pre;overflow:auto;margin:0;color:var(--accent)}

/* Domain (見えない問題を修正→濃いテキスト) */
.domain-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
.domain-card{border:1px solid var(--rule);border-radius:14px;background:linear-gradient(180deg,#1a1b1e,#151619);padding:16px 14px;box-shadow:0 10px 26px rgba(0,0,0,.35)}
.domain-card h4{margin:0 0 6px;color:#fff}
.domain-card p{color:var(--accent);margin:0}
.domain-card .target{color:var(--muted);font-size:13px;margin-top:8px}
.domain-card .pen{width:18px;height:18px;fill:var(--amber);margin-right:6px;opacity:.9}

/* Gallery */
.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
.gallery figure{margin:0;border-radius:14px;overflow:hidden;box-shadow:0 12px 28px rgba(0,0,0,.35);background:#111}
.gallery img{width:100%;height:220px;object-fit:cover;display:block;filter:contrast(1.05) brightness(.92)}
.gallery figcaption{padding:10px 12px;font-size:13px;color:var(--accent)}
.note{color:var(--muted);font-size:12px;margin-top:8px}

/* Tablelike */
.tablelike{display:grid;grid-template-columns:160px 1fr;gap:8px 16px;margin:0}
.tablelike dt{color:var(--muted)}
.tablelike dd{margin:0;color:var(--accent)}

/* Contact */
.contact-form{display:grid;gap:12px;margin-top:8px}
.contact-form label{display:grid;gap:6px;font-size:14px;color:var(--muted)}
.contact-form input,.contact-form textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--rule);background:#0f1012;color:#eaeaea}
.form-note{font-size:12px;color:var(--muted)}

/* Footer */
.site-footer{border-top:1px solid var(--rule);padding:26px 0}
.site-footer .container{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
.legal a{margin-left:12px;color:var(--muted);text-decoration:none}
.legal a:hover{color:var(--accent)}

/* Mobile tweaks */
@media (max-width:720px){
  .menu{gap:12px}
  .cover{min-height:68vh}
  .quill{display:none}
}
